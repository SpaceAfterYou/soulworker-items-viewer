import{s as w,r as h,o as p,c as _,a,z as f,G as T,E as v,a3 as I,a4 as C,g as W,D as B,w as $,b as D,t as m,F as M,A as S,C as V,n as j,q as y,K as A,h as G}from"./entry.vLj40Yd0.js";const L=""+globalThis.__publicAssetsURL("GUI/Icon/Item/Dummy.png"),O={class:"h-min w-min outline transition-all hover:outline-pink-500",type:"button"},P={class:"flex h-14 w-14 place-content-center place-items-center transition-opacity hover:opacity-50"},R={class:"flex place-content-center place-items-center"},U=["height","width","src"],H={key:1,src:L,height:"48",width:"48"},N=w({__name:"icon",props:{icon:{}},setup(t){const o=h(null),l=h(0),s=h(0),e=new Image;return e.onload=()=>{o.value=`./${t.icon}`,l.value=e.naturalWidth,s.value=e.naturalHeight},e.src=t.icon,(n,r)=>(p(),_("button",O,[a("div",P,[a("div",R,[f(o)?(p(),_("img",{key:0,height:f(s),width:f(l),src:f(o)},null,8,U)):(p(),_("img",H))]),T(n.$slots,"default")])]))}}),z={class:"max-w-3xl bg-black/50 p-4"},E=w({__name:"modal",emits:["on-close"],setup(t){return(o,l)=>(p(),v(C,{to:"#items-modal"},[a("section",{class:"fixed left-0 top-0 flex h-full w-full place-content-center place-items-center bg-black/50 leading-relaxed backdrop-blur-md",onClick:l[0]||(l[0]=I(s=>o.$emit("on-close"),["self"]))},[a("section",z,[T(o.$slots,"default")])])]))}});function g(t){return typeof t=="function"?t():f(t)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const b=()=>{};function k(t,o){function l(...s){return new Promise((e,n)=>{Promise.resolve(t(()=>o.apply(this,s),{fn:o,thisArg:this,args:s})).then(e).catch(n)})}return l}const q=t=>t();function F(t,o={}){let l,s,e=b;const n=c=>{clearTimeout(c),e(),e=b};return c=>{const i=g(t),u=g(o.maxWait);return l&&n(l),i<=0||u!==void 0&&u<=0?(s&&(n(s),s=null),Promise.resolve(c())):new Promise((d,x)=>{e=o.rejectOnCancel?x:d,u&&!s&&(s=setTimeout(()=>{l&&n(l),s=null,d(c())},u)),l=setTimeout(()=>{s&&n(s),s=null,d(c())},i)})}}function ie(t,o=200,l={}){return k(F(o,l),t)}function K(t,o,l={}){const{eventFilter:s=q,...e}=l;return W(t,k(s,o),e)}function J(t=!1,o={}){const{truthyValue:l=!0,falsyValue:s=!1}=o,e=B(t),n=h(t);function r(c){if(arguments.length)return n.value=c,n.value;{const i=g(l);return n.value=n.value===i?g(s):i,n.value}}return e?r:[n,r]}function Q(t,o,l={}){const{debounce:s=0,maxWait:e=void 0,...n}=l;return K(t,o,{...n,eventFilter:F(s,{maxWait:e})})}const X={class:"grid grid-cols-[auto_1fr] gap-x-2 gap-y-4"},Y={class:"flex grow flex-col self-center"},Z={class:"col-span-full"},ee={class:"flex justify-evenly gap-4 text-center"},te={class:"font-bold uppercase"},ne={class:"flex justify-center gap-4"},se={class:"text-white/50"},oe=["innerHTML"],ae=w({__name:"button",props:{item:{}},setup(t){const o=["gainType","inventoryType","slotType"],[l,s]=J();return(e,n)=>{const r=N,c=E;return p(),v(r,{onClick:n[1]||(n[1]=i=>f(s)()),icon:e.item.icon},{default:$(()=>[f(l)?(p(),v(c,{key:0,onOnClose:n[0]||(n[0]=i=>f(s)(!1))},{default:$(()=>[a("div",X,[D(r,{icon:e.item.icon},null,8,["icon"]),a("div",Y,[a("span",null,m(e.item.id),1),a("span",null,m(e.$t(`items.${e.item.id}.name`)),1)]),a("div",Z,[a("ul",ee,[(p(),_(M,null,S(o,i=>a("li",{class:"w-full whitespace-nowrap rounded bg-pink-500/50 px-4 py-2",key:i},[a("h4",te,m(e.$t(`${i}.name`)),1),a("div",ne,[a("span",se,m(e.item[i]),1),a("p",null,m(e.$t(`${i}.values.${e.item[i]}`)),1)])])),64))])]),a("div",{innerHTML:e.$t(`items.${e.item.id}.description`),class:"col-span-full whitespace-pre-wrap"},null,8,oe)])]),_:1})):V("",!0)]),_:1},8,["icon"])}}}),re=j("filter-store",()=>{const t=h([]),o=y(new Map);function l(n){const r=y(new Map);return o.set(n,r),G(()=>{console.log(`onBeforeUnmount: ${n}`),o.delete(n)}),{filters:r,set:({callable:u,id:d})=>r.set(d,u),del:({id:u})=>r.delete(u)}}const{items:s}=A();function e(n){t.value=s;for(const[r,c]of n){if(c.size===0){console.log(`skip side filter: ${r}`);continue}console.log(`use filter: ${r}`);const i=Array.from(c.values());console.log(`with values: ${i}`),t.value=t.value.filter(u=>i.some(d=>d(u))),console.log(`filtered count: ${t.value.length}`)}}return Q(o,e,{debounce:300}),{useFilter:l,filtered:t}});export{ae as _,ie as a,re as u};
