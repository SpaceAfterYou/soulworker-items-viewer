import{s as _,o as d,c as w,a as r,G as $,a3 as C,E as h,a4 as x,a5 as S,g as B,D,r as T,z as m,w as v,b as M,t as p,F as W,A as O,C as V,n as j,q as y,K as G,h as P}from"./entry.3XAlyh4o.js";const z={class:"h-min w-min outline transition-all hover:outline-pink-500",type:"button"},A=_({__name:"icon",props:{icon:{}},setup(e){const l=t=>({backgroundImage:`url(./${t}), url(./GUI/Icon/Item/Dummy.png)`});return(t,o)=>(d(),w("button",z,[r("div",{class:"h-12 w-12 bg-contain bg-center bg-no-repeat transition-opacity hover:opacity-50",style:C(l(t.icon))},[$(t.$slots,"default")],4)]))}}),L={class:"max-w-3xl bg-black/50 p-4"},N=_({__name:"modal",emits:["on-close"],setup(e){return(l,t)=>(d(),h(S,{to:"#items-modal"},[r("section",{class:"fixed left-0 top-0 flex h-full w-full place-content-center place-items-center bg-black/50 leading-relaxed backdrop-blur-md",onClick:t[0]||(t[0]=x(o=>l.$emit("on-close"),["self"]))},[r("section",L,[$(l.$slots,"default")])])]))}});function g(e){return typeof e=="function"?e():m(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const b=()=>{};function k(e,l){function t(...o){return new Promise((s,n)=>{Promise.resolve(e(()=>l.apply(this,o),{fn:l,thisArg:this,args:o})).then(s).catch(n)})}return t}const R=e=>e();function F(e,l={}){let t,o,s=b;const n=c=>{clearTimeout(c),s(),s=b};return c=>{const i=g(e),u=g(l.maxWait);return t&&n(t),i<=0||u!==void 0&&u<=0?(o&&(n(o),o=null),Promise.resolve(c())):new Promise((f,I)=>{s=l.rejectOnCancel?I:f,u&&!o&&(o=setTimeout(()=>{t&&n(t),o=null,f(c())},u)),t=setTimeout(()=>{o&&n(o),o=null,f(c())},i)})}}function ne(e,l=200,t={}){return k(F(l,t),e)}function U(e,l,t={}){const{eventFilter:o=R,...s}=t;return B(e,k(o,l),s)}function E(e=!1,l={}){const{truthyValue:t=!0,falsyValue:o=!1}=l,s=D(e),n=T(e);function a(c){if(arguments.length)return n.value=c,n.value;{const i=g(t);return n.value=n.value===i?g(o):i,n.value}}return s?a:[n,a]}function H(e,l,t={}){const{debounce:o=0,maxWait:s=void 0,...n}=t;return U(e,l,{...n,eventFilter:F(o,{maxWait:s})})}const q={class:"grid grid-cols-[auto_1fr] gap-x-2 gap-y-4"},K={class:"flex grow flex-col self-center"},J={class:"col-span-full"},Q={class:"flex justify-evenly gap-4 text-center"},X={class:"font-bold uppercase"},Y={class:"flex justify-center gap-4"},Z={class:"text-white/50"},ee=["innerHTML"],oe=_({__name:"button",props:{item:{}},setup(e){const l=["gainType","inventoryType","slotType"],[t,o]=E();return(s,n)=>{const a=A,c=N;return d(),h(a,{onClick:n[1]||(n[1]=i=>m(o)()),icon:s.item.icon},{default:v(()=>[m(t)?(d(),h(c,{key:0,onOnClose:n[0]||(n[0]=i=>m(o)(!1))},{default:v(()=>[r("div",q,[M(a,{icon:s.item.icon},null,8,["icon"]),r("div",K,[r("span",null,p(s.item.id),1),r("span",null,p(s.$t(`items.${s.item.id}.name`)),1)]),r("div",J,[r("ul",Q,[(d(),w(W,null,O(l,i=>r("li",{class:"w-full whitespace-nowrap rounded bg-pink-500/50 px-4 py-2",key:i},[r("h4",X,p(s.$t(`${i}.name`)),1),r("div",Y,[r("span",Z,p(s.item[i]),1),r("p",null,p(s.$t(`${i}.values.${s.item[i]}`)),1)])])),64))])]),r("div",{innerHTML:s.$t(`items.${s.item.id}.description`),class:"col-span-full whitespace-pre-wrap"},null,8,ee)])]),_:1})):V("",!0)]),_:1},8,["icon"])}}}),se=j("filter-store",()=>{const e=T([]),l=y(new Map);function t(n){const a=y(new Map);return l.set(n,a),P(()=>{console.log(`onBeforeUnmount: ${n}`),l.delete(n)}),{filters:a,set:({callable:u,id:f})=>a.set(f,u),del:({id:u})=>a.delete(u)}}const{items:o}=G();function s(n){e.value=o;for(const[a,c]of n){if(c.size===0){console.log(`skip side filter: ${a}`);continue}console.log(`use filter: ${a}`);const i=Array.from(c.values());console.log(`with values: ${i}`),e.value=e.value.filter(u=>i.some(f=>f(u))),console.log(`filtered count: ${e.value.length}`)}}return H(l,s,{debounce:300}),{useFilter:t,filtered:e}});export{oe as _,ne as a,se as u};
