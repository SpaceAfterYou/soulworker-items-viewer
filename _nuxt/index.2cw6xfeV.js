import{s as _,o as d,c as $,a as r,G as b,a3 as C,E as h,a4 as x,a5 as S,g as B,D,r as T,z as m,w as v,b as M,t as p,F as W,A as O,C as V,n as j,q as y,K as G,h as P}from"./entry.pXFERFiQ.js";const z={class:"h-min w-min outline transition-all hover:outline-pink-500"},A=_({__name:"icon",props:{icon:{}},setup(e){const l=t=>({backgroundImage:`url(./${t}), url(./GUI/Icon/Item/Dummy.png)`});return(t,s)=>(d(),$("button",z,[r("div",{class:"h-12 w-12 bg-contain bg-center bg-no-repeat transition-opacity hover:opacity-50",style:C(l(t.icon))},[b(t.$slots,"default")],4)]))}}),L={class:"max-w-3xl bg-black/50 p-4"},N=_({__name:"modal",emits:["on-close"],setup(e){return(l,t)=>(d(),h(S,{to:"#items-modal"},[r("section",{class:"fixed left-0 top-0 flex h-full w-full place-content-center place-items-center bg-black/50 leading-relaxed backdrop-blur-md",onClick:t[0]||(t[0]=x(s=>l.$emit("on-close"),["self"]))},[r("section",L,[b(l.$slots,"default")])])]))}});function g(e){return typeof e=="function"?e():m(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const w=()=>{};function k(e,l){function t(...s){return new Promise((o,n)=>{Promise.resolve(e(()=>l.apply(this,s),{fn:l,thisArg:this,args:s})).then(o).catch(n)})}return t}const R=e=>e();function F(e,l={}){let t,s,o=w;const n=c=>{clearTimeout(c),o(),o=w};return c=>{const i=g(e),u=g(l.maxWait);return t&&n(t),i<=0||u!==void 0&&u<=0?(s&&(n(s),s=null),Promise.resolve(c())):new Promise((f,I)=>{o=l.rejectOnCancel?I:f,u&&!s&&(s=setTimeout(()=>{t&&n(t),s=null,f(c())},u)),t=setTimeout(()=>{s&&n(s),s=null,f(c())},i)})}}function ne(e,l=200,t={}){return k(F(l,t),e)}function U(e,l,t={}){const{eventFilter:s=R,...o}=t;return B(e,k(s,l),o)}function E(e=!1,l={}){const{truthyValue:t=!0,falsyValue:s=!1}=l,o=D(e),n=T(e);function a(c){if(arguments.length)return n.value=c,n.value;{const i=g(t);return n.value=n.value===i?g(s):i,n.value}}return o?a:[n,a]}function H(e,l,t={}){const{debounce:s=0,maxWait:o=void 0,...n}=t;return U(e,l,{...n,eventFilter:F(s,{maxWait:o})})}const q={class:"grid grid-cols-[auto_1fr] gap-x-2 gap-y-4"},K={class:"flex grow flex-col self-center"},J={class:"col-span-full"},Q={class:"flex justify-evenly gap-4 text-center"},X={class:"font-bold uppercase"},Y={class:"flex justify-center gap-4"},Z={class:"text-white/50"},ee=["innerHTML"],se=_({__name:"button",props:{item:{}},setup(e){const l=["gainType","inventoryType","slotType"],[t,s]=E();return(o,n)=>{const a=A,c=N;return d(),h(a,{onClick:n[1]||(n[1]=i=>m(s)()),icon:o.item.icon},{default:v(()=>[m(t)?(d(),h(c,{key:0,onOnClose:n[0]||(n[0]=i=>m(s)(!1))},{default:v(()=>[r("div",q,[M(a,{icon:o.item.icon},null,8,["icon"]),r("div",K,[r("span",null,p(o.item.id),1),r("span",null,p(o.$t(`items.${o.item.id}.name`)),1)]),r("div",J,[r("ul",Q,[(d(),$(W,null,O(l,i=>r("li",{class:"w-full whitespace-nowrap rounded bg-pink-500/50 px-4 py-2",key:i},[r("h4",X,p(o.$t(`${i}.name`)),1),r("div",Y,[r("span",Z,p(o.item[i]),1),r("p",null,p(o.$t(`${i}.values.${o.item[i]}`)),1)])])),64))])]),r("div",{innerHTML:o.$t(`items.${o.item.id}.description`),class:"col-span-full whitespace-pre-wrap"},null,8,ee)])]),_:1})):V("",!0)]),_:1},8,["icon"])}}}),oe=j("filter-store",()=>{const e=T([]),l=y(new Map);function t(n){const a=y(new Map);return l.set(n,a),P(()=>{console.log(`onBeforeUnmount: ${n}`),l.delete(n)}),{filters:a,set:({callable:u,id:f})=>a.set(f,u),del:({id:u})=>a.delete(u)}}const{items:s}=G();function o(n){e.value=s;for(const[a,c]of n){if(c.size===0){console.log(`skip side filter: ${a}`);continue}console.log(`use filter: ${a}`);const i=Array.from(c.values());console.log(`with values: ${i}`),e.value=e.value.filter(u=>i.some(f=>f(u))),console.log(`filtered count: ${e.value.length}`)}}return H(l,o,{debounce:300}),{useFilter:t,filtered:e}});export{se as _,ne as a,oe as u};
